/* ----------- Soft Palette & Theme ----------- */
:root{
  --bg: #F7F8FB;
  --paper: #FFFFFF;
  --text: #0f172a;
  --text-muted:#475569;
  --primary:#7C83FD;     /* soft indigo */
  --primary-weak:#ECEEFF;
  --accent:#6EE7B7;      /* mint */
  --accent-weak:#ECFDF5;
  --peach:#FFE4C7;
  --lav:#EDE7F6;
  --rose:#FDE2F3;
  --muted:#E5E7EB;
  --line:#E2E8F0;
  --shadow: 0 6px 24px rgba(20, 20, 43, .08);
  --radius: 16px;
}

body[data-theme="dark"]{
  --bg:#0B1220;
  --paper:#0f172a;
  --text:#E6E9F2;
  --text-muted:#9AA4B2;
  --primary:#A78BFA;
  --primary-weak:#2B2F44;
  --accent:#34D399;
  --accent-weak:#12332A;
  --peach:#3B2B1F;
  --lav:#241E38;
  --rose:#33202A;
  --muted:#20263A;
  --line:#1f2937;
  --shadow: 0 6px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family:"Heebo",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

.hidden{display:none !important;}
.muted{color:var(--text-muted)}

.app-header{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px;
  background:linear-gradient(180deg, var(--paper), rgba(255,255,255,0.85));
  border-bottom:1px solid var(--line);
  backdrop-filter: blur(6px);
}

.brand{display:flex; align-items:center; gap:12px; cursor:pointer}

.brand-logo{
  width:40px; height:40px; border-radius:12px; object-fit:cover;
  box-shadow:var(--shadow); border:1px solid var(--line); background:var(--paper);
}

  width:40px; height:40px; display:grid; place-items:center;
  border-radius:12px; background:var(--primary-weak); color:var(--primary);
  font-size:20px; box-shadow:var(--shadow);
}
.brand-text .title{font-weight:800; letter-spacing:.5px}
.brand-text .subtitle{font-size:12px; color:var(--text-muted)}

.header-actions{display:flex; align-items:center; gap:10px}
button{font-family:inherit}
button.primary{
  background:linear-gradient(180deg, var(--primary), #5E66F4);
  color:#fff; border:0; padding:10px 14px; border-radius:12px;
  box-shadow:var(--shadow); cursor:pointer; font-weight:700;
}
button.soft{
  background:var(--accent); color:#052018; border:0; padding:10px 14px;
  border-radius:12px; box-shadow:var(--shadow); cursor:pointer; font-weight:700;
}
button.ghost{
  background:transparent; color:var(--text); border:1px solid var(--line);
  padding:9px 14px; border-radius:12px; cursor:pointer; font-weight:600;
}
button.danger{background:#ef4444; color:#fff; border:0; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700}
button.icon-btn{
  display:inline-grid; place-items:center; width:40px; height:40px;
  border-radius:12px; background:var(--paper); border:1px solid var(--line); cursor:pointer;
}
button.chip{
  display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px;
  background:var(--paper); border:1px solid var(--line); cursor:pointer; font-weight:600;
}
button.chip.active{background:var(--primary-weak); color:#30347A; border-color:transparent}

.user-badge{
  padding:8px 12px; border-radius:999px; background:var(--lav); color:#372A63; border:1px solid rgba(55,42,99,.2);
  font-weight:700;
}

/* Layout */
.container{
  display:grid; grid-template-columns: 320px 1fr; gap:16px;
  padding:16px; align-items:start;
}
.sidebar{
  position:sticky; top:72px; align-self:start;
  display:flex; flex-direction:column; gap:12px;
  max-height: calc(100dvh - 84px);
  overflow:auto;
}
.sidebar .sticky{position:sticky; top:0; background:linear-gradient(180deg, var(--paper), rgba(255,255,255,0.75));
  padding:12px; border:1px solid var(--line); border-radius:var(--radius); backdrop-filter:blur(6px); box-shadow:var(--shadow)}
.section-title{display:flex; align-items:center; gap:8px; font-weight:900; letter-spacing:.4px;}
.search-wrap{
  display:flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px;
  background:var(--paper); border:1px solid var(--line);
}
.search-wrap input{border:0; outline:0; width:100%; background:transparent}
.view-controls{display:flex; gap:8px; flex-wrap:wrap}

.trip-list.grid{display:grid; grid-template-columns: 1fr; gap:12px; margin-top:12px}
.trip-card, .trip-row{
  background:var(--paper); border:1px solid var(--line); border-radius:var(--radius);
  padding:12px; box-shadow:var(--shadow);
  display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
}
.trip-card .meta, .trip-row .meta{display:flex; flex-direction:column; gap:6px}
.trip-title{font-weight:900; font-size:18px}
.trip-sub{color:var(--text-muted); font-size:13px}
.badges{display:flex; gap:6px; flex-wrap:wrap}
.badge{background:var(--primary-weak); color:#30347A; border-radius:999px; padding:4px 8px; font-size:12px; font-weight:800}

.menu-btn{border:0; background:var(--paper); border:1px solid var(--line); border-radius:10px; padding:6px 8px; cursor:pointer}
.menu-btn .material-symbols-rounded{font-size:20px}

.main{display:flex; flex-direction:column; gap:12px}
.tabs{display:flex; gap:6px; flex-wrap:wrap}
.tab{
  background:var(--paper); border:1px solid var(--line); border-radius:999px; padding:10px 14px; font-weight:800; cursor:pointer;
  display:inline-flex; align-items:center; gap:6px;
}
.tab.active{background:var(--primary-weak); color:#30347A; border-color:transparent}

.panel{
  background:var(--paper); border:1px solid var(--line); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow);
}

/* Cards */
.card{
  background:var(--paper); border:1px solid var(--line); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow);
}

/* Login screen */
.login-screen{display:grid; place-items:center; min-height:70dvh}
.login-card{max-width:520px; width:100%; display:flex; flex-direction:column; gap:10px}
.login-card h1{margin:0 0 6px 0}
.login-card .btn-row{display:flex; gap:8px; flex-wrap:wrap}
.error{color:#ef4444; font-weight:700}

/* Rows */
.row-2{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.row-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px}
.row{display:flex; gap:10px; flex-wrap:wrap}

/* Modals */
.modal{border:0; padding:0; width:min(960px, 96vw); border-radius:20px; overflow:hidden; box-shadow:var(--shadow)}
.modal.large{width:min(1200px, 96vw)}
.modal-card{display:flex; flex-direction:column; gap:0}
.modal-card header{display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid var(--line); background:var(--paper)}
.modal-card .modal-body{padding:16px; display:flex; flex-direction:column; gap:10px; background:var(--paper)}
.modal-card footer{display:flex; align-items:center; gap:8px; padding:12px 16px; border-top:1px solid var(--line); background:var(--paper)}
.modal::backdrop{background:rgba(13,18,32,.55)}

/* Tables */
.table{width:100%; border-collapse:collapse}
.table th, .table td{border-bottom:1px solid var(--line); padding:10px; text-align:right}
.table th{background:var(--primary-weak); color:#30347A; font-weight:900}
.note{font-size:12px; color:var(--text-muted)}

/* Map */
.map{width:100%; height:360px; border-radius:14px; overflow:hidden; border:1px solid var(--line)}

/* Budget bar */
.budget-bar{
  display:flex; align-items:center; gap:8px; flex-wrap:wrap; justify-content:space-between;
  padding:12px; border:1px dashed var(--line); border-radius:14px; background:linear-gradient(180deg, var(--accent-weak), transparent);
}
.budget-badges{display:flex; gap:8px; flex-wrap:wrap}
.badge-ghost{border:1px solid var(--line); border-radius:999px; padding:6px 10px}
.badge-click{cursor:pointer}

/* Accordions (mobile) */
.accordions details{border:1px solid var(--line); border-radius:16px; margin:10px 0; background:var(--paper); box-shadow:var(--shadow)}
.accordions summary{display:flex; gap:8px; align-items:center; padding:12px 14px; font-weight:900; cursor:pointer}
.accordions .panel{padding:12px 14px; border-top:1px dashed var(--line)}

/* Desktop-only vs Mobile-only */
.desktop-only{display:block}
.mobile-only{display:none}

.spacer{flex:1 1 auto}
.left{margin-inline-end:auto}

/* Responsive */
@media (max-width: 900px){
  .container{grid-template-columns: 1fr; gap:10px}
  .sidebar{order:2}
  .main{order:1}
  .desktop-only{display:none}
  .mobile-only{display:block}
}


/* Standalone login screen */
body.no-auth .container{display:none}
body.auth .login-screen{display:none}
.login-screen{min-height:calc(100dvh - 68px); padding:24px}
.login-screen .login-card{margin-top:6dvh}

/* Smooth fade */
.hidden{display:none !important;}


/* Softer inputs */
input, select, textarea{
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(246,248,255,.9), var(--paper));
  box-shadow: inset 0 1px 0 rgba(0,0,0,.03), var(--shadow);
  transition:.15s ease;
}
input:focus, select:focus, textarea:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow: 0 0 0 3px var(--primary-weak), inset 0 1px 0 rgba(0,0,0,.04), var(--shadow);
}
.login-card input{
  background:linear-gradient(180deg, #F6F7FF, #FFFFFF);
  border-color: rgba(124,131,253,.35);
}

/* Softer inputs v2 */
.login-card input, .login-card select, .login-card textarea{
  border-radius:18px;
  background:linear-gradient(180deg, #F8FAFF, #FFFFFF);
}


/* Hide trip panels when not in trip-mode */
.home-mode .main{ display:none !important; }
.trip-mode .main{ display:flex !important; }

/* Empty state */
.empty-state{
  background:var(--paper);
  border:1px dashed var(--line);
  border-radius:var(--radius);
  padding:20px;
  text-align:center;
  color:var(--text-muted);
  box-shadow:var(--shadow);
}
.empty-state .primary{ margin-top:8px; }
