<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>FLYMILY — מנהל נסיעות</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <!-- Top bar -->
  <header class="topbar">
    <img src="./flymily-logo.png" alt="FLYMILY" style="height:28px;vertical-align:middle"/>
    <span id="currentUserEmail" class="muted" style="margin-inline:8px;display:none"></span>
    <button id="btnLogin" class="btn" style="margin-inline-start:auto">התחברו</button>
    <span id="userBadge" style="display:none;margin-inline-start:8px">מחובר</span>
  </header>

  <!-- App container (hidden until login) -->
  <div class="container" style="display:none">
    <div class="app">
      <div class="muted" style="padding:2rem">נטען…</div>
    </div>
  </div>

  <!-- Simple login screen for logged-out state -->
  <div id="loginScreen" style="padding:2rem">
    <p>כדי להמשיך, התחברו לחשבון.</p>
    <button class="btn primary" onclick="document.getElementById('authModal').showModal()">כניסה</button>
  </div>

  <!-- AUTH MODAL -->
  <dialog id="authModal" class="modal">
    <header>
      <nav class="tabs">
        <button class="tab-btn active" data-tab="loginTab">כניסה</button>
        <button class="tab-btn" data-tab="signupTab">הרשמה</button>
        <button class="tab-btn" data-tab="resetTab">איפוס סיסמה</button>
      </nav>
    </header>
    <div class="body">
      <section id="loginTab" class="tab-panel">
        <label>אימייל<input id="authEmail" type="email" class="input" placeholder="name@example.com"/></label>
        <label>סיסמה<input id="authPass" type="password" class="input" placeholder="••••••••"/></label>
        <p id="authError" class="muted" style="color:var(--danger);"></p>
      </section>
      <section id="signupTab" class="tab-panel" hidden>
        <label>אימייל<input id="suEmail" type="email" class="input" placeholder="name@example.com"/></label>
        <label>סיסמה<input id="suPass" type="password" class="input" placeholder="מינימום 6 תווים"/></label>
        <p id="suError" class="muted" style="color:var(--danger);"></p>
      </section>
      <section id="resetTab" class="tab-panel" hidden>
        <label>אימייל<input id="rsEmail" type="email" class="input" placeholder="name@example.com"/></label>
        <p id="rsInfo" class="muted"></p>
      </section>
    </div>
    <div class="footer">
      <button id="authPrimary" class="btn primary">כניסה</button>
      <button id="authSecondary" class="btn">ביטול</button>
    </div>
  </dialog>

  <!-- Scripts -->
  <script type="module" src="./firebase.js"></script>
  <script src="./script.js"></script>
</body>
</html>
