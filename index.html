<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>FLYMILY</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 64 64%27%3E%3Ccircle cx=%2732%27 cy=%2732%27 r=%2730%27 fill=%27%238B5CF6%27/%3E%3Cpath d=%27M16 38l10-10 8 8 14-14%27 stroke=%27white%27 stroke-width=%276%27 fill=%27none%27/%3E%3C/svg%3E" type="image/svg+xml">
</head>
<body class="splash-mode">
  <!-- קישוטים רקע -->
  <div class="bg-ornaments" aria-hidden="true"></div>

  <!-- מסך פתיחה -->
  <section id="splash" role="region" aria-label="מסך פתיחה">
    <div class="splash-card">
      <img class="splash-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAQAElEQVR4AexdB4BdRdX+ZuaW99723XSS0KWEDtIUBFERFVEUVEABFREURBAEFQ2CYEFQbIAiRWpoIkiHhN5CJ7SE9L59X71t5v/mbRZDlfwSSjKXd97MnXLmzDd3zzdn7m6QcJdDwCHgEHAIOAQcAu97BByhv++X0E3AIeAQcAg4BBwCwMoldIewQ8Ah4BBwCDgEHALvCAKO0N8RmN0gDgGHgEPAQeAQWLkIvJ8JfeUi47Q7BBwCDgGHgEPgfYSAI7/4N7RYzlSHgEHAIOAQcAi8Twhw/uW2FylxCQIOAYeAQ8Ah8I4jwIeA/39aLGerQ8Ah4BBwCDgEXi8CHH+9bY2wT7dDwCHgEHAIOATeGgg4Qn/bW+hGdwg4BBwCDgGHwFsj4Aj9bd2N6x/V6n0IOAQcAg6BlQ4Bjv81X+2X2E7AIeAQcAg4BFY9Ahz/V10VlX8r59FzCDgEHAKrEQKO0FdFxTz41m3fIOAQcAg4BF5HBByhv++Xm6XyCDgEHAKrIQKO0FdlVV3uXLcIOAQcAg6BdxABx3/xXn0+V0PAIOAQcAg4BN41Ahz/NV1d5tZpdwg4BBwCDgGHwFsj4Aj9bd+t7y9X2CHgEHAIOAS+YwQc/3U8O2eSQ8Ah4BBwCKx2BByhv+1d9T1fOQj4fAghhBBChE2Y8fHjTj3v/N+c8vR3j/r/X/n0r7/9w9//77/v2385+y8+/e2Tvv+W+d/5b9v/5Suf+P73T7r4wz/++Y+Gv/7Nn7/z7t8fe/8rV/z8G+d9/Q+/+O0Tjnv6Xz79m3ee9/3Dzzvvq+8fdu3d/eMPDz79wzH+/w8gBBCCxEQIOAK/Q0B2Q2MChBBCCCGEEEII4G8EHKG/H3v0mAkQggghhBBCCCGEEEII4F8IHCE/P+QoMhBCQgjBCEGIQoEIgQj1mRABCAEIQQjBEAIQAgECkIBAAQgBEIIoAQgBQv8BwFzI+Q0FEEIIsJ8K1K/V9vX+3r4p8j2nThvQe9/f86Y182/f9cM3Tj/h6f33H3z+D3//m/f/86877/m3j3/f/f/4u3c/+1+c8/S7n3/b77/4H76y8fF3H/nN+2+/9eB7brv1sX+3O/b+7V/f+t3bbrj+2r97+s4bV233v+dMffqFh6/1zLzH7n/f/e/d/b8wQghghBAEiUCAuP8T0E6aCCGEEEK0wYAB/eMvPvzh7/+z7d/97PzPnXb3rfd+cv8Nn/j2x9/7x2//81/9x3u/e/tX7/vR/c657+63nvvlqfPOOOfvP3n/g8d//Ntf/dG3//HnH33/o3fefd+vfvWp88857rRjXzn/9vOf3XP5vTdfd+3jX3/f/H/8/O4vfnH+9e9cffvjL/3455++8c47f/aXb7n3vtvOO++y51336TnvvE/9r3/612988+1f/M1f/vFv/u2H/+e/fvf+4x+/+6u3X3Ld/c67f/vPj//h8P6HP/jhB6NPPPv0V9//6euf+u7jH/3o+/c///s//eMf/eMPf/zjH//4xz/+8Y9//OMf//jHP//xT//883/+/N7v/n1nf/7z37//d//3f//3v//7f/8v//nPf/zjH//4xz/+8Y9//OMf//jHP//xj3/84x//+Mc//vGPf/zjH//4xz/+8Y9//OMf//jHP//xj3/84x//+Mc//vGPf/zjH//4xz/+8Y9//OMf//jHP//xj3/84x//+Mc//vGPf/zjH//4xz/+yY//++e//+3v//f//uf//n//7/+//+///u///u//+u+//frf//3ff/iHf/gH//mf//mP//if//if//if//if//id//ie//ie//id//if//if//if//id//ie//ie//ie//ie//id//id//if//if//ie//ie//id//id//ie//ie//ie//id//id//ie//ie//ie//ie//ie//id//id//if//ie//ie//ie//if//if//if//ie//id//ie//if//id//ie//if//if//id//ie//id//if//ie//ie//if//if//ie//id//if//if//if//if//if//if//if//ie//id//if//if//ie//id//if//if//ie//ie//id//id//if//if//if//if//if//if//if//if//id//if//if//if//if//id//if//if//if//id//if//id//if//if//if//id//if//if//if//if//if//id//if//if//id//if//if//id//if//if//if//if//id//if//if//if//if//if//if//id//id//id//if//if//id//if//if//if//if//id//if//if//id//id//if//if//if//id//if//if//if//id//if//id//if//id//id//id//id//if//if//if//if//if//id//if//if//id//id//if//if//if//id//if//if//if//if//id//if//id//if//if//id//if//if//if//if//if//if//if//if//id//if//id//if//if//id//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//if//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id//id
// body, #app {
  /* display: flex; */
  /* flex-direction: column; */
}
#app {
  min-height: 100vh;
}
.app-header, .app-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 18px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 50;
}
.app-footer {
  border-top: 1px solid var(--border);
  border-bottom: none;
  bottom: 0;
  top: auto;
  position: sticky;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}
.brand .logo { font-size: 22px; }
.brand h1 {
  font-size: 18px;
  margin: 0;
}
#userAccount{
  margin-inline-start: 10px;
  font-weight: 600;
  opacity: .9;
  white-space: nowrap;
}

main {
  padding: 16px;
  max-width: 1200px;
  margin: 0 auto;
}

.view { display: none; }
.view.active { display: block; }

.toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
.toolbar h2 { margin: 0; }
.toolbar-actions {
  display: flex;
  flex-grow: 1;
}
#tripSearch { width: 100%; }

/* --- TRIP LIST --- */
.cards {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 12px;
}
.cards li {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: var(--shadow);
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: auto;
  position: relative;
}
.cards .trip-title { font-weight: 600; }
.cards .muted {
  font-size: 12px;
  color: var(--muted);
}
.cards .row {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
}
.cards .row.bottom-row {
  margin-top: 10px;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  width: 100%;
}
.cards .row .btn {
  flex-grow: 1;
  width: auto;
}

/* --- LIST VIEW OVERRIDES --- */
#tripList.list-mode {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
#tripList.list-mode > li {
  display: block !important;
  position: relative;
  padding: 14px 16px 14px 88px !important;
}
#tripList.list-mode > li > div:first-child {
  display: flex !important;
  align-items: center;
  gap: 8px;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
}
#tripList.list-mode .trip-header { display: contents !important; }
#tripList.list-mode .trip-title {
  font-weight: 700;
  min-width: 0;
  max-width: 44vw;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#tripList.list-mode .muted { white-space: nowrap; }
#tripList.list-mode .row {
  display: inline-flex !important;
  gap: 6px;
  align-items: center;
  margin: 0 !important;
}
#tripList.list-mode .row.bottom-row { display: none !important; }
#tripList.list-mode .kebab-wrap::before, #tripList.list-mode .kebab-wrap::after { content: none !important; }
#tripList.list-mode .kebab-btn {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: transparent;
  color: inherit;
  display: grid;
  place-items: center;
  line-height: 0;
}
.kebab-wrap {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
}
#tripList.list-mode .kebab-menu {
  inset-inline-start: 0;
  inset-inline-end: auto;
}

/* --- FLOATING ACTION BUTTON --- */
.fab {
  position: fixed;
  bottom: 90px;
  inset-inline-end: 24px;
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 56px;
  height: 56px;
  font-size: 26px;
  cursor: pointer;
  box-shadow: var(--shadow);
  z-index: 100;
}

/* --- BUTTONS --- */
.btn {
  appearance: none;
  border: none;
  border-radius: 12px;
  padding: 10px 14px;
  cursor: pointer;
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
}
.btn.primary {
  background: var(--primary);
  color: #fff;
  border-color: transparent;
}
.btn.ghost { background: transparent; }
.btn.danger {
  background: var(--danger);
  color: #fff;
  border-color: transparent;
}
.btn.btn-outline {
  background: transparent;
  border: 2px solid currentColor;
  box-shadow: none;
  font-family: 'Rubik', sans-serif;
  font-weight: 600;
  font-size: 16px;
  padding: 10px 14px;
}
.btn.btn-outline:active { transform: translateY(0); }

/* --- INPUTS / FORMS --- */
.input, select.input, textarea.input {
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
}
.input:focus { outline: 2px solid var(--primary-600); }
.two-row-label {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
}
.two-row-label .input { grid-column: 1 / span 2; }
.two-row-label .btn { align-self: end; }
.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 5px;
}
.checkbox-group label {
  display: flex;
  align-items: center;
  gap: 5px;
  background: var(--panel);
  border: 1px solid var(--border);
  padding: 8px 12px;
  border-radius: 12px;
  cursor: pointer;
  white-space: nowrap;
}
.checkbox-group label:has(input:checked) {
  background: var(--primary);
  color: #fff;
  border-color: transparent;
}
.checkbox-group input[type="checkbox"] { display: none; }
.form.compact {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
  height: auto;
}
.form.compact .form-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
}
@media (min-width: 768px) {
  .form.compact .form-grid { grid-template-columns: 1fr 1fr; }
}
.form.compact .form-col {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.form.compact .form-col label { margin-bottom: 0; }
.input-with-button {
  display: flex;
  gap: 8px;
  align-items: flex-end;
}
.input-with-button .input { flex: 1; }
.two-column-input {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.currency-inputs {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.currency-inputs .input { width: auto; }
.form-actions-inline {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
  width: 100%;
}
.form-actions-inline .form-actions { margin: 0; }
.form-actions-inline .spacer { flex-grow: 1; }
.dialog .form-actions {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  gap: 10px;
}
.dialog .form-actions button { flex: none; }
.dialog-actions, .dialog-actions-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}
.dialog-actions, .dialog-actions-row .input-with-button { flex-grow: 1; }

/* --- BREADCRUMBS / HEADER --- */
.breadcrumbs {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 8px 0 14px;
  flex-wrap: wrap;
}
.breadcrumbs h2 {
  margin: 0;
  flex: 1;
}

/* --- TABS & PANELS --- */
.tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
.tab {
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  cursor: pointer;
  color: var(--text);
  font-family: 'Rubik', sans-serif;
  font-weight: 600;
  font-size: 16px;
  padding: 10px 14px;
}
.tab.active {
  background: var(--primary);
  color: #fff;
  border-color: transparent;
}
.panel { display: none; }
.panel.active { display: block; }

/* --- OVERVIEW --- */
#tab-overview #overviewMeta {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
#tab-overview #overviewMeta > div,
#tab-overview #tripBudgetILSDisplay {
  font-size: 20px;
  line-height: 1.9;
  color: var(--text);
}
#tab-overview #overviewMeta strong { font-weight: 700; }
#tab-overview #tripBudgetILSDisplay { margin-top: 6px; }

/* --- BUDGET & EXPENSES --- */
.budget-card-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-auto-rows: minmax(min-content, max-content);
  gap: 10px;
  align-items: center;
  padding-bottom: 20px;
}
.budget-card-grid h3 {
  grid-column: 1 / span 4;
  margin: 0;
}
.budget-row {
  grid-column: 1 / span 4;
  display: contents;
}
.budget-label {
  font-weight: 500;
  font-size: 14px;
  grid-column: 1 / 2;
  align-self: center;
}
.currency-cell {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px;
  text-align: center;
  font-size: 16px;
  font-weight: 700;
  align-self: center;
}
.currency-cell.negative { color: var(--danger); }
#expensesActualUSD, #expensesActualEUR, #expensesActualILS,
#remainingUSD, #remainingEUR, #remainingILS { font-weight: 500; }
.table-wrapper { overflow-x: auto; }
.table {
  width: 100%;
  border-collapse: collapse;
}
.table th, .table td {
  padding: 10px;
  border-bottom: 1px solid var(--border);
  text-align: right;
}
.table tbody tr:hover { background: rgba(255,255,255,0.02); }
.table-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.table-actions h3 { margin: 0; }
.table .row-actions { display: flex; gap: 6px; }
.expense-datetime {
  display: flex;
  flex-direction: row;
  gap: 6px;
  white-space: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.expense-datetime .time { order: 1; }
.expense-datetime .date { order: 2; }
.table-actions-journal {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.table-actions-journal h3 { margin: 0; }
.table-actions-journal .btn { flex: 1; }

/* --- JOURNAL --- */
#tab-journal #journalTable {
  table-layout: fixed;
  width: 100%;
}
#tab-journal #journalTable th:nth-child(1),
#tab-journal #journalTable td:nth-child(1) {
  width: 54%;
  white-space: normal;
  word-break: break-word;
}
#tab-journal #journalTable th:nth-child(2),
#tab-journal #journalTable td:nth-child(2) { width: 16%; }
#tab-journal #journalTable th:nth-child(3),
#tab-journal #journalTable td:nth-child(3) {
  width: 8%;
  text-align: center;
}
#tab-journal #journalTable th:nth-child(4),
#tab-journal #journalTable td:nth-child(4) {
  width: 20%;
  text-align: left;
  padding-left: 0;
}

/* --- MAPS --- */
.map {
  width: 100%;
  height: 280px;
  border-radius: 12px;
  border: 1px solid var(--border);
}
.map.tall { height: 420px; }
#map-controls-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 10px;
}
#map-controls-row .btn { flex-grow: 1; }

/* --- DIALOGS & MODALS --- */
.dialog::backdrop { background: rgba(0,0,0,0.45); }
.dialog {
  border: none;
  padding: 24px 24px 18px;
  margin: 0;
  background: var(--card, #ffffff);
  color: var(--text, #0f172a);
  border-radius: 20px;
  width: min(520px, 92vw);
  height: auto;
  max-height: min(92vh, 640px);
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,.24);
}
.dialog.wide {
  width: min(1100px, 98vw);
  height: 92vh;
  max-height: 92vh;
}
.dialog .dialog-title {
  font-size: 28px;
  font-weight: 800;
  line-height: 1.2;
  margin: 0 0 12px;
  text-align: right;
}
.dialog .form { padding: 16px; }
.dialog .form-actions {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  gap: 10px;
}
.dialog .form-actions button { flex: none; }

/* --- EXPORT / IMPORT / SHARE --- */
.share-controls {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}
#exportAndImportPanel .btn-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 10px;
}
#exportAndImportPanel .file-upload-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
#exportAndImportPanel input[type="file"] {
  display: block;
  width: 100%;
}
#exportAndImportPanel .btn-file {
  position: relative;
  overflow: hidden;
  display: inline-block;
}
#exportAndImportPanel .btn-file input[type=file] {
  position: absolute;
  top: 0;
  right: 0;
  min-width: 100%;
  min-height: 100%;
  font-size: 100px;
  text-align: right;
  filter: alpha(opacity=0);
  opacity: 0;
  outline: none;
  cursor: inherit;
  display: block;
}

/* --- UTILITIES & GENERAL --- */
.hidden { display: none !important; }
.muted {
  color: var(--muted);
  font-size: 12px;
}
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 12px;
}
.badge.ok {
  border-color: transparent;
  background: rgba(53,212,154,0.12);
  color: #b3ffe4;
}
.badge.bad {
  border-color: transparent;
  background: rgba(224,49,72,0.12);
  color: #ffd7dc;
}
.link-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--primary);
  color: #fff;
  font-size: 16px;
  text-decoration: none;
  transition: background 0.2s ease;
}
.link-icon:hover { background: var(--primary-600); }
.journal-text {
  white-space: pre-wrap;
  line-height: 1.5;
}

/* --- MOBILE RESPONSIVE --- */
@media (max-width: 600px) {
  html, body {
    overflow-x: hidden;
    overflow-y: hidden;
  }
  .breadcrumbs {
    flex-direction: column;
    align-items: flex-start;
  }
  .share-controls {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }
  .share-controls button, .share-controls select { width: 100%; }
  .share-controls label { align-self: flex-start; }
  .tabs { flex-direction: column; }
  .tab {
    width: 100%;
    text-align: center;
  }
  .table {
    font-size: 12px;
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }
  .table th, .table td { padding: 8px; }
  .row {
    flex-direction: column;
    gap: 8px;
    align-items: flex-start;
  }
  .two {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  .two.flat { grid-template-columns: 1fr; }
  .two.flat button, .two.flat input { width: 100%; }
  .cards .row {
    flex-direction: column;
    align-items: center;
  }
  .cards .row .btn { width: 100%; }
  .dialog {
    border: none;
    padding: 0;
    border-radius: 16px;
    width: min(980px, 96vw);
    height: 92vh;
    max-height: 92vh;
    overflow: hidden;
  }
  .dialog.wide .form {
    height: auto;
    display: flex;
    flex-direction: column;
  }
}
@media (max-width: 900px) {
  .expense-dialog-grid {
    grid-template-columns: 1fr;
    height: auto;
  }
  .expense-dialog-grid .map-side .map { height: 50vh; }
}
@media (max-width: 700px) {
  #expDateTimeRow.two { grid-template-columns: 1fr !important; }
}